<!DOCTYPE html>
<html>
<head>
	<title>Atividade</title>
	<link rel="stylesheet" href="css/styles.css">
	<script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>
	<h1><center>Atividade Visualizacao</center></h1>
	<h2 id="bilheteria"><b>Gráfico ordenado pelas maiores bilheterias</b></h2>

	<h2 id="orcamento"><b>Gráfico ordenado pelo maior orçamento</b></h2>	

    <h2 id="lucro"><b>Gráfico ordenado pelo menor lucro</b></h2>


    <h2 id="genero"><b>Gráfico bilheteria por genero</b></h2>

   <script type="text/javascript">
        function renderBilheteria(data, compare) {
            d3.select("#bilheteria").selectAll("div.h-bar")
            .data(data)
            .enter()
                .append("div")
                    .attr("class", "h-bar")
                	.append("span");
            
            d3.select("#bilheteria").selectAll("div.h-bar")
                .data(data)
                	.attr("class", "h-bar")
                	.style("width", function (d) {
                    	return (d.Worldwide_Gross_M/4) + "px";
                	})
                .select("span")
                    .text(function (d) {
                        return d.Film;
                    });
            if(compare)
            	d3.select("#bilheteria")
                	.selectAll("div.h-bar") 
                	.sort(compare);

        }
        
		var compareBilheteria = function (a, b) { 
        	return a.Worldwide_Gross_M < b.Worldwide_Gross_M? 1:-1;
    	};

    	function renderOrcamento(data, compare){
    		d3.select("#orcamento").selectAll("div.h-bar")
    		.data(data)
    		.enter()
    			.append("div")
    				.attr("class", "h-bar")
                	.append("span");

            d3.select("#orcamento").selectAll("div.h-bar")
    		.data(data)
    			.attr("class","h-bar")
    			.style("width", function (d){
    				return (d.Budget_M*4) + "px";
    			})
    		.select("span")
    			.text(function(d){
    				return d.Film;
    			});

    		d3.select("#orcamento").selectAll("div").style("background-color","orange");

    		if(compare)
            	d3.select("#orcamento")
                	.selectAll("div.h-bar") 
                	.sort(compare);


    	}

    	var compareOrcamento = function (a, b) { 
        	return a.Budget_M < b.Budget_M? 1:-1;
    	};


    	function renderLucro(data, compare){
    		d3.select("#lucro").selectAll("div.h-bar")
    		.data(data)
    		.enter()
    			.append("div")
    				.attr("class", "h-bar")
                	.append("span");

            d3.select("#lucro").selectAll("div.h-bar")
    		.data(data)
    			.attr("class","h-bar")
    			.style("width", function (d){
    				return (d.Worldwide_Gross_M-d.Budget_M)/2 + "px";
    			})
    		.select("span")
    			.text(function(d){
    				return d.Film;
    			});

    		d3.select("#lucro").selectAll("div").style("background-color","green");

    		if(compare)
            	d3.select("#lucro")
                	.selectAll("div.h-bar") 
                	.sort(compare);

    	}

    	var compareLucro = function (a, b) { 
        	return (a.Worldwide_Gross_M-a.Budget_M) < (b.Worldwide_Gross_M-b.Budget_M)? 1:-1;
    	};

    	var generos = [];
    	var g = []
    	function teste(data){
 
    		/*data.forEach(function(film){
    			film.
 	 		});*/
 	 		var value = 0;
 	 		for(var i = 0; i < data.lenght; i++){
 	 			value = data[i]
 	 		}

 	 		
    	}
    	console.log(generos);
    	





        d3.json("movies.json", function(error, json){ 
            renderBilheteria(json, compareBilheteria);
            renderOrcamento(json, compareOrcamento);
            renderLucro(json, compareLucro);
            teste(json);
            d3.selectAll("div.h-bar").classed("customize", true);

        });
    </script>

</body>
</html>